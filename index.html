<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Analyze Before Sharing</title>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #ffffff;
      color: #222;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 32px 20px;
    }

    h1 {
      font-size: 28px;
      font-weight: 500;
      margin-bottom: 8px;
    }

    .subtitle {
      font-size: 14px;
      color: #666;
      margin-bottom: 24px;
    }

    .intro {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 24px;
    }

    .prompt {
      font-size: 15px;
      color: #555;
      margin-bottom: 12px;
    }

    textarea {
      width: 100%;
      min-height: 140px;
      padding: 12px;
      font-size: 15px;
      border-radius: 8px;
      border: 1px solid #ddd;
      resize: vertical;
      box-sizing: border-box;
    }

    button {
      margin-top: 16px;
      padding: 10px 18px;
      font-size: 14px;
      border-radius: 20px;
      border: none;
      background: #eaeaea;
      cursor: pointer;
    }

    button:hover {
      background: #ddd;
    }

    .result {
      margin-top: 32px;
      white-space: pre-wrap;
      line-height: 1.6;
    }

    footer {
      margin-top: 48px;
      font-size: 12px;
      color: #888;
      text-align: center;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="subtitle">
      A personal public project by a Cambodian creator
    </div>

    <h1>Analyze before sharing</h1>

    <div id="intro" class="intro">
      Loading…
    </div>

    <div class="prompt">
      Before reacting, take a moment.
    </div>

    <textarea id="text" placeholder="Paste the content you just read…"></textarea>

    <br/>

    <button onclick="analyze()">Analyze calmly</button>

    <div id="result" class="result"></div>

    <footer>
      This tool analyzes language and presentation only.  
      It does not verify facts or access live news.
    </footer>
  </div>

  <script>
    // Load intro text
    fetch("/api/intro")
      .then(res => res.json())
      .then(data => {
        document.getElementById("intro").innerText = data.intro;
      });

    async function analyze() {
      const text = document.getElementById("text").value;
      const resultEl = document.getElementById("result");

      if (!text || text.length < 10) {
        resultEl.innerText = "Please provide more text to analyze.";
        return;
      }

      resultEl.innerText = "Analyzing calmly…";

      const response = await fetch("/api/analyze", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text })
      });

      const data = await response.json();
      resultEl.innerText = data.result;
    }
  </script>
</body>
</html>
